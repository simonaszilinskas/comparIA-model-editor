<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Éditeur de modèles Compar:IA</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Compar:IA model editor</h1>
            <div class="header-actions">
                <input type="file" id="import-file" accept=".json" style="display: none;">
                <button id="import-btn" class="btn btn-secondary">Importer fichier JSON</button>
                <button id="paste-json-btn" class="btn btn-secondary">Coller JSON</button>
                <button id="export-csv-btn" class="btn btn-secondary">Exporter CSV</button>
                <button id="copy-json-direct" class="btn btn-secondary">Copier JSON</button>
                <button id="export-btn" class="btn btn-primary">Exporter JSON</button>
            </div>
        </header>

        <div class="main-content">
            <!-- Company List -->
            <div class="companies-panel">
                <div class="panel-header">
                    <h2>Éditeurs</h2>
                    <button id="add-company-btn" class="btn btn-small">Ajouter éditeur</button>
                </div>
                <div id="companies-list" class="companies-list"></div>
            </div>

            <!-- Model Editor -->
            <div class="editor-panel">
                <div class="panel-header">
                    <h2 id="editor-title">Sélectionnez un éditeur pour voir les modèles</h2>
                    <button id="add-model-btn" class="btn btn-small" style="display: none;">Ajouter modèle</button>
                </div>
                <div id="models-list" class="models-list"></div>
            </div>
        </div>

        <!-- Company Modal -->
        <div id="company-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="company-modal-title">Ajouter éditeur</h3>
                    <span class="close">&times;</span>
                </div>
                <form id="company-form">
                    <div class="form-content">
                        <div class="form-group">
                        <label for="company-name" class="required">Nom de l'éditeur :</label>
                        <input type="text" id="company-name" required>
                    </div>
                    <div class="form-group">
                        <label for="company-icon">Chemin de l'icône :</label>
                        <input type="text" id="company-icon">
                    </div>
                    <div class="form-group">
                        <label for="proprietary-license-desc">Description de la licence propriétaire :</label>
                        <textarea id="proprietary-license-desc"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="proprietary-reuse-specificities">Spécificités de réutilisation propriétaire :</label>
                        <textarea id="proprietary-reuse-specificities"></textarea>
                    </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="cancel-company" class="btn btn-secondary">Annuler</button>
                        <button type="submit" class="btn btn-primary">Enregistrer éditeur</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Model Modal -->
        <div id="model-modal" class="modal">
            <div class="modal-content model-modal-content">
                <div class="modal-header">
                    <h3 id="model-modal-title">Ajouter modèle</h3>
                    <span class="close">&times;</span>
                </div>
                <form id="model-form">
                    <!-- Short fields section -->
                    <div class="form-section">
                        <h4 class="form-section-title">Informations de base</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="model-id">ID du modèle :</label>
                                <input type="text" id="model-id">
                            </div>
                            <div class="form-group">
                                <label for="model-simple-name" class="required">Nom simple :</label>
                                <input type="text" id="model-simple-name" required>
                                <div class="character-counter">
                                    <span id="model-simple-name-counter">0 characters</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="model-license" class="required">Licence :</label>
                                <select id="model-license" required>
                                    <option value="">Sélectionner une licence...</option>
                                    <option value="__custom__">+ Ajouter nouvelle licence</option>
                                </select>
                                <input type="text" id="model-license-custom" placeholder="Entrer nouvelle licence" style="display: none; margin-top: 10px;">
                            </div>
                            <div class="form-group">
                                <label for="model-release-date">Date de sortie :</label>
                                <input type="text" id="model-release-date" placeholder="MM/YYYY">
                            </div>
                            <div class="form-group">
                                <label for="model-params">Paramètres :</label>
                                <input type="text" id="model-params" placeholder="Nombre ou XL, L, M, S">
                            </div>
                            <div class="form-group">
                                <label for="model-active-params">Paramètres actifs :</label>
                                <input type="number" id="model-active-params" step="0.1">
                            </div>
                            <div class="form-group">
                                <label for="model-arch">Architecture :</label>
                                <select id="model-arch">
                                    <option value="dense">Dense</option>
                                    <option value="moe">Mixture of Experts (MoE)</option>
                                    <option value="maybe-moe">Maybe MoE</option>
                                    <option value="maybe-dense">Maybe Dense</option>
                                    <option value="matformer">MatFormer</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="model-url">URL :</label>
                                <input type="url" id="model-url">
                            </div>
                        </div>
                        <div class="form-group checkbox-inline">
                            <label for="model-reasoning">
                                Modèle de raisonnement
                                <input type="checkbox" id="model-reasoning">
                            </label>
                        </div>
                        <div class="form-group checkbox-inline">
                            <label for="model-new">
                                Nouveau modèle (marquer comme nouveau)
                                <input type="checkbox" id="model-new">
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="model-status">Statut :</label>
                            <select id="model-status">
                                <option value="">Aucun statut spécial</option>
                                <option value="__custom__">+ Ajouter nouveau statut</option>
                            </select>
                            <input type="text" id="model-status-custom" placeholder="Entrer nouveau statut" style="display: none; margin-top: 10px;">
                        </div>
                    </div>

                    <!-- API Endpoint Section -->
                    <div class="form-section" style="padding-top: 0;">
                        <h4 class="form-section-title">Point d'accès API (Optionnel)</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="model-endpoint-api-type">Type d'API :</label>
                                <select id="model-endpoint-api-type">
                                    <option value="">Sélectionner type d'API...</option>
                                    <option value="__custom__">+ Ajouter nouveau type d'API</option>
                                </select>
                                <input type="text" id="model-endpoint-api-type-custom" placeholder="Entrer nouveau type d'API" style="display: none; margin-top: 10px;">
                            </div>
                            <div class="form-group">
                                <label for="model-endpoint-api-model-id">ID modèle API :</label>
                                <input type="text" id="model-endpoint-api-model-id" placeholder="ex. meta-llama/llama-4-scout">
                            </div>
                            <div class="form-group">
                                <label for="model-endpoint-api-base">URL de base API :</label>
                                <input type="url" id="model-endpoint-api-base" placeholder="ex. https://api.example.com/v1/">
                            </div>
                        </div>
                    </div>

                    <!-- Long descriptions section -->
                    <div class="form-section">
                        <h4 class="form-section-title">Descriptions</h4>
                        <div class="form-group">
                            <label for="model-desc">Description :</label>
                            <textarea id="model-desc" class="extra-large" rows="8"></textarea>
                            <div class="character-counter">
                                <span id="model-desc-counter">0 caractères</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="model-size-desc">Description de la taille :</label>
                            <textarea id="model-size-desc" class="extra-large" rows="8"></textarea>
                            <div class="character-counter">
                                <span id="model-size-desc-counter">0 caractères</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="model-fyi">Informations complémentaires :</label>
                            <textarea id="model-fyi" class="extra-large" rows="12"></textarea>
                            <div class="character-counter">
                                <span id="model-fyi-counter">0 caractères</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="cancel-model" class="btn btn-secondary">Annuler</button>
                        <button type="submit" class="btn btn-primary">Enregistrer modèle</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Changelog Modal -->
        <div id="changelog-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Réviser les modifications</h3>
                    <span class="close">&times;</span>
                </div>
                <div class="changelog-content">
                    <p>Modifications détectées automatiquement (format compatible PR) :</p>
                    <div class="form-group">
                        <label for="changelog-entry">Résumé des modifications :</label>
                        <textarea id="changelog-entry" rows="12" readonly class="changelog-preview"></textarea>
                        <div class="character-counter">
                            <span id="changelog-entry-counter">0 modifications détectées</span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button id="skip-changelog" class="btn btn-secondary">Annuler</button>
                        <button id="save-changelog" class="btn btn-primary">Continuer vers l'export</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Paste JSON Modal -->
        <div id="paste-json-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Coller données JSON</h3>
                    <span class="close">&times;</span>
                </div>
                <div class="paste-content">
                    <p>Collez vos données JSON ci-dessous :</p>
                    <textarea id="paste-json-input" rows="20" placeholder="Collez vos données JSON ici..."></textarea>
                    <div class="form-actions">
                        <button id="cancel-paste" class="btn btn-secondary">Annuler</button>
                        <button id="import-pasted-json" class="btn btn-primary">Importer données</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Modal -->
        <div id="export-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Exporter JSON</h3>
                    <span class="close">&times;</span>
                </div>
                <div class="export-content">
                    <p>Copiez le JSON ci-dessous :</p>
                    <textarea id="export-json" readonly></textarea>
                    <div class="form-actions">
                        <button id="copy-json" class="btn btn-primary">Copier dans le presse-papiers</button>
                        <button id="download-json" class="btn btn-secondary">Télécharger fichier</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>